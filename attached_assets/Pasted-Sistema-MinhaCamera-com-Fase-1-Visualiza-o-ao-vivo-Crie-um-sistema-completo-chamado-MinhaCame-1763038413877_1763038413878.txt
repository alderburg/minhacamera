Sistema: MinhaCamera.com â€“ Fase 1 (VisualizaÃ§Ã£o ao vivo)

Crie um sistema completo chamado MinhaCamera.com, um painel de gerenciamento e visualizaÃ§Ã£o de cÃ¢meras IP com suporte white label, permitindo cadastrar empresas, clientes e cÃ¢meras, com diferentes nÃ­veis de acesso (super admin, admin e usuÃ¡rio comum).
Nesta primeira fase, o sistema nÃ£o grava vÃ­deos, apenas exibe cÃ¢meras em tempo real (RTSP/RTSC), com estrutura preparada para futura implementaÃ§Ã£o de gravaÃ§Ã£o e compressÃ£o local.

âš™ï¸ TECNOLOGIAS RECOMENDADAS

Frontend: React + TypeScript + Tailwind CSS + Shadcn/UI + React Query + Wouter (ou React Router)

Backend: Node.js + Express + Drizzle ORM + PostgreSQL

Streaming: ConexÃ£o via RTSP â†’ HLS (convertido com FFmpeg no servidor)

AutenticaÃ§Ã£o: JWT (JSON Web Token)

Hospedagem: Local ou servidor prÃ³prio (sem dependÃªncia de nuvem)

ğŸ§© FUNCIONALIDADES PRINCIPAIS
ğŸ” AutenticaÃ§Ã£o e Acessos

Login/logout com controle por papÃ©is (super admin, admin, usuÃ¡rio).

Redirecionamento automÃ¡tico conforme o nÃ­vel de acesso.

Middleware no backend valida permissÃµes e empresa vinculada.

ğŸ§‘â€ğŸ’¼ NÃ­veis de UsuÃ¡rio

Super Admin

Pode cadastrar empresas.

Pode cadastrar clientes e cÃ¢meras para qualquer empresa.

Pode visualizar todas as cÃ¢meras do sistema.

Admin (empresa)

Pode cadastrar clientes e cÃ¢meras da sua empresa.

Pode atribuir cÃ¢meras a clientes especÃ­ficos.

Pode visualizar apenas cÃ¢meras da sua empresa.

UsuÃ¡rio (cliente final)

Pode apenas visualizar cÃ¢meras liberadas para ele.

Interface tipo aplicativo com topbar e menu inferior.

ğŸ’¾ BANCO DE DADOS (estrutura inicial)

Tabelas:

users
id, nome, email, senha, tipo (super_admin | admin | user), empresa_id (nullable)

empresas
id, nome, logo, dominio, ativo

clientes
id, nome, email, telefone, empresa_id, ativo

cameras
id, nome, url_rtsp, empresa_id, ativa

camera_acessos
id, camera_id, cliente_id

ğŸ¥ VISUALIZAÃ‡ÃƒO DE CÃ‚MERAS AO VIVO

ConversÃ£o de RTSP â†’ HLS (ou WebRTC) usando FFmpeg no servidor.

Endpoint /api/stream/:cameraId gera o stream ao vivo em HLS.

Player de vÃ­deo no frontend (React Player ou hls.js).

Status da cÃ¢mera (online/offline) detectado automaticamente.

ExibiÃ§Ã£o em grade ou lista (ex: 2x2, 3x3).

FunÃ§Ã£o de expandir cÃ¢mera em tela cheia.

Layout responsivo (desktop e mobile).

ğŸ–¥ï¸ INTERFACE â€“ DESKTOP

Sidebar lateral com menus:

Dashboard

Empresas (somente para super admin)

Clientes

CÃ¢meras

ConfiguraÃ§Ãµes

PÃ¡ginas principais:

/login

/dashboard

/empresas

/clientes

/cameras

/visualizacao

Dashboard mostra estatÃ­sticas simples (total de cÃ¢meras, online/offline).

ğŸ“± INTERFACE â€“ MOBILE (App-like)

Layout com:

Topbar: mostra logo e nome da empresa.

Menu inferior: Ã­cones â€œInÃ­cioâ€, â€œCÃ¢merasâ€, â€œPerfilâ€.

Acesso rÃ¡pido Ã s cÃ¢meras liberadas.

VisualizaÃ§Ã£o em tela cheia.

Responsividade completa via Tailwind.

Preparado para ser convertido em PWA (instalÃ¡vel como app).

âš™ï¸ ESTRUTURA DE PASTAS SUGERIDA
/frontend
  /src
    /components
    /pages
    /routes
    /hooks
    /services
    /styles
/backend
  /src
    /routes
    /controllers
    /models
    /middlewares
    /services

ğŸ§° FUNÃ‡Ã•ES EXTRA (PREPARADAS PARA FUTURA EXPANSÃƒO)

Campos nas cÃ¢meras jÃ¡ incluem:

dias_gravacao (para uso futuro)

resolucao_preferida (para compressÃ£o futura)

API jÃ¡ estruturada para:

/api/gravacoes (a ser implementada depois)

/api/compressao (para FFmpeg)

Cronjob preparado mas desativado (para apagar vÃ­deos antigos quando a gravaÃ§Ã£o estiver ativa).

ğŸ§± REQUISITOS FUTUROS (para prÃ³xima fase â€“ gravaÃ§Ã£o local)

Implementar mÃ³dulo de gravaÃ§Ã£o contÃ­nua no servidor.

CompressÃ£o automÃ¡tica com FFmpeg.

Definir tempo de retenÃ§Ã£o (ex: 7 dias).

Armazenamento local organizado por /empresa_id/camera_id/data.mp4.

Linha do tempo para playback no app.

Captura de imagem (snapshot) e download.

ğŸš€ OBJETIVO FINAL

Criar um sistema SaaS white label de monitoramento de cÃ¢meras IP, iniciando com a visualizaÃ§Ã£o ao vivo via RTSP/HLS, com estrutura escalÃ¡vel para futura gravaÃ§Ã£o, compressÃ£o e armazenamento local â€” acessÃ­vel via web e mobile app.